% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/single_cell_annotation.R
\name{multi_model_annotate}
\alias{multi_model_annotate}
\title{Multi-model Cell Type Annotation Function}
\usage{
multi_model_annotate(
  model_name,
  markers,
  background,
  api_key,
  base_url,
  selected_clusters = NULL,
  gene_number = 20,
  p_threshold = 0.01,
  workers = 3,
  max_retries = 5,
  temperature = 0.1,
  max_tokens = 1000,
  time_out = 60,
  retry_delay = 1,
  output_prefix = "multi_model",
  log_file = NULL
)
}
\arguments{
\item{model_name}{Character vector containing multiple model names, e.g. c("gpt-4o", "claude-3-5-haiku-20241022")}

\item{markers}{Marker gene data frame}

\item{background}{Sample background description}

\item{api_key}{API key for the AI service}

\item{base_url}{Base URL for the API}

\item{selected_clusters}{Select specific clusters for annotation, default NULL (annotate all clusters)}

\item{gene_number}{Number of genes to select per cluster, default 20}

\item{p_threshold}{P-value threshold, default 0.01}

\item{workers}{Number of parallel worker processes, default 3}

\item{max_retries}{Maximum number of retry attempts, default 5}

\item{temperature}{Temperature parameter, default 0.1}

\item{max_tokens}{Maximum number of tokens, default 1000}

\item{time_out}{Timeout in seconds, default 60}

\item{retry_delay}{Retry delay in seconds, default 1}

\item{output_prefix}{Output file prefix, default "multi_model"}

\item{log_file}{Path to log file for recording all API requests and responses, default NULL (no logging)}
}
\value{
A data frame containing annotation results from all models with columns: model, cluster, cell_type, subtype, confidence, top_genes
}
\description{
This function performs cell type annotation using multiple AI models and compares results.
It automatically detects API format based on model names and processes annotations in parallel.
Additionally, it can generate a detailed log file containing all API requests and responses.
}
\examples{
\dontrun{
# Multi-model annotation
results <- multi_model_annotate(
  model_name = c("gpt-4", "claude-3-sonnet"),
  markers = marker_genes,
  background = "Human PBMC sample",
  api_key = "your_api_key",
  base_url = "your_api_url"
)
}
}
